!function($){var e;e={init:function(e,s){e.addClass("stack-menu"),e.find("ul").addClass("stack-menu__list").eq(0).addClass(["stack-menu__list--root","stack-menu__list--active"]),e.find("li").addClass("stack-menu__item"),e.find("span").addClass("stack-menu__link"),$(".stack-menu__item").each(function(e){$(this).attr("data-id",e),$(this).find(".stack-menu__list").length>0&&$(this).children(".stack-menu__link").addClass("stack-menu__link--parent")}),$(".stack-menu__list").each(function(){if(!$(this).hasClass("stack-menu__list--root")){var e=$(this.parentNode).find(".stack-menu__link--parent")[0].innerHTML,s=$("<li>",{class:"stack-menu__item stack-menu__item--back"}),t=$("<span>",{class:"stack-menu__link stack-menu__link--back",html:e});s.append(t),$(this).prepend(s)}}),e.find(".stack-menu__link").on("click activate",function(s){var t=$(this),a=t.closest(".stack-menu__item"),n=a.closest(".stack-menu__list"),i=n.closest(".stack-menu__item");if(t.hasClass("stack-menu__link--back"))s.preventDefault(),n.removeClass("stack-menu__list--active"),i.removeClass("stack-menu__item--opened"),i.find(".stack-menu__link").removeClass("stack-menu__link--hidden"),i.closest(".stack-menu__list").children(".stack-menu__item").removeClass("stack-menu__item--hidden");else{var _;if(t.hasClass("stack-menu__link--active")?(_=!0,t.removeClass("stack-menu__link--active")):(_=!1,e.find(".stack-menu__link--active").removeClass("stack-menu__link--active"),t.addClass("stack-menu__link--active")),0===a.children(".stack-menu__list").length)return!0;s.preventDefault(),i.length>0&&i.addClass("stack-menu__item--opened");var c=t.next(".stack-menu__list").children(".stack-menu__item--back");c.length>0&&(_?c.eq(0).children(".stack-menu__link").removeClass("stack-menu__link--active"):c.eq(0).children(".stack-menu__link").addClass("stack-menu__link--active")),t.addClass("stack-menu__link--hidden"),a.children(".stack-menu__list").addClass("stack-menu__list--active"),$(n.children(".stack-menu__item")).each(function(){$(this).data("id")!==a.data("id")&&$(this).addClass("stack-menu__item--hidden")})}})}},jQuery.fn.stackMenu=function(s){return s=$.extend({all:!1,allTitle:"All"},s),e.init(this,s),{reset:function(e){$(e).find(".stack-menu").removeClass("stack-menu--active"),$(e).find(".stack-menu__list").removeClass("stack-menu__list--active"),$(e).find(".stack-menu__item").removeClass("stack-menu__item--hidden").removeClass("stack-menu__item--opened"),$(e).find(".stack-menu__link").removeClass("stack-menu__link--hidden").removeClass("stack-menu__link--active"),$(e).find(".stack-menu__list--root").addClass("stack-menu__list--active")}}}}(jQuery);
