!function(){"use strict";function e(e,t,i){var n,s,o,c;(n=window.innerHeight)<650?(n=.8*n|0,s=Math.max(n,250)):s=600,(n=window.innerWidth)<950?(n=.8*n|0,o=Math.max(n,250)):o=900;var l=i.filetype.toUpperCase(),r="i"+(new Date).getTime().toString(16);tinymce.activeEditor.dom.setAttrib(tinymce.activeEditor.dom.select("html"),"data-cmsfp-instance",r),top.document.CMSFileBrowser||(top.document.CMSFileBrowser={settings:{}}),top.document.CMSFileBrowser.settings.onselect=function(t,i){function n(e){var t=e.lastIndexOf("/")+1,i=e.substring(t);return-1!==(t=i.lastIndexOf("."))&&(i=i.substring(0,t)),i}i=cms_data.root_url+"/"+i;var s={};"ANY"===l?s.text=n(i):"IMAGE"===l&&(s.alt=n(i)),e(i,s),top.document.CMSFileBrowser.settings.onselect=null,c.close()};var a=cmsms_tiny.filepicker_url+"&inst="+r+"&type="+l;c=tinymce.activeEditor.windowManager.open({title:cmsms_tiny.filepicker_title,file:a,classes:"filepicker",height:s,width:o,inline:1,resizable:!0,maximizable:!0},{onFileSelected:function(e){console.debug("woot got callback with "+e)}})}tinymce.util.Tools.resolve("tinymce.PluginManager").add("cmsms_filepicker",function(t,i){t.settings.file_picker_type="file image media",t.settings.file_picker_callback=e})}();
