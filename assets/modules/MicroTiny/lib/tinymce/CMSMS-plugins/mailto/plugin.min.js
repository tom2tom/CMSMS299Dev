!function(){"use strict";var t;function e(){var e,a,i,o=t.selection.getNode();"A"==o.tagName&&t.dom.getAttrib(o,"href").startsWith("mailto:")?(a=t.dom.getAttrib(o,"href").replace("mailto:",""),i=(e=t.dom.getParent(o,'a[href*="mailto:"]')).innerText,console.log(o)):(a="",e=!1,i=t.selection.getContent({format:"text"})),t.windowManager.open({title:cmsms_tiny.prompt_insertmailto,body:[{type:"textbox",name:"email",size:40,label:cmsms_tiny.prompt_email,value:a},{type:"textbox",name:"text",size:40,label:cmsms_tiny.prompt_linktext,value:i}],onsubmit:function(a){var i;i=""!=a.data.text?a.data.text:a.data.email,e&&t.selection.select(e),t.execCommand("mceInsertContent",!1,t.dom.createHTML("a",{href:"mailto:"+a.data.email},i))}})}tinymce.util.Tools.resolve("tinymce.PluginManager").add("mailto",function(a,i){t=a,a.addMenuItem("mailto",{text:cmsms_tiny.mailto_text,title:cmsms_tiny.mailto_title,image:cmsms_tiny.mailto_image,stateSelector:'a[href*="mailto:"]',context:"insert",prependToContext:!0,onclick:e}),a.addButton("mailto",{text:"@",tooltip:cmsms_tiny.prompt_insertmailto,onclick:e,stateSelector:'a[href*="mailto:"]'})})}();
