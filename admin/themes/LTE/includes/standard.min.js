/*!
CMSMS LTE theme functions v.2
(C) 2020-2022 CMS Made Simple Foundation <foundation@cmsmadesimple.org>
License GPL2+
*/
!function(e,$,t,o){"use strict";e.LT={init:function(){this.isLocalStorage()||this.loadScript("themes/assets/js/js-cookie.min.js"),this.setupAlerts(),cms_notify_all(),$('a[rel="external"]').attr("target","_blank"),cms_data.sitedown&&$(".outwarn").on("click activate",function(e){e.preventDefault();var t=cms_lang("maintenance_warning");return cms_confirm_linkclick(this,t),!1}),$("input.defaultfocus, input[autofocus]").eq(0).focus()},loadScript:function(e,t,o){var a=!0,n=null;return"function"==typeof t?(n=t,a=o||a):(a=t||a,n=o||n),$('script[type="text/javascript"]').each(function(){return e!==$(this).attr("src")}),$.ajax(e,{dataType:"script",async:!1,cache:a}).done(n)},setStorageValue:function(e,t,o){var a=(new Date).getTime()+24*o*60*60*1e3,n={};try{!0===this.isLocalStorage()?(localStorage.removeItem(e),n=null!==o?{value:t,timestamp:a}:{value:t,timestamp:""},localStorage.setItem(e,JSON.stringify(n))):"undefined"!=typeof Cookies&&(null!==o?Cookies.set(e,t,{expires:o}):Cookies.set(e,t))}catch(o){console.log("localStorage Error: set("+e+", "+t+")"),console.log(o)}},getStorageValue:function(e){var t,o="";return this.isLocalStorage()?null!==(o=JSON.parse(localStorage.getItem(e)))&&o.timestamp<(new Date).getTime()?this.removeStorageValue(e):null!==o&&(t=o.value):"undefined"!=typeof Cookies&&(t=Cookies(e)),t},removeStorageValue:function(e){this.isLocalStorage()?localStorage.removeItem(e):"undefined"!=typeof Cookies&&Cookies.remove(e)},isLocalStorage:function(){return"undefined"!=typeof Storage},isMobileDevice:function(){if(navigator.userAgent.toLowerCase().match(/(Android|iPhone|iPad|iPod|Blackberry|Dolphin|IEMobile|WPhone|Windows Mobile|IEMobile9||IEMobile10||IEMobile11|Kindle|Mobile|MMP|MIDP|Pocket|PSP|Symbian|Smartphone|Sreo|Up.Browser|Up.Link|Vodafone|WAP|Opera Mini|Opera Tablet|Mobile|Fennec)/i)&&("ontouchstart"in t||navigator.msMaxTouchPoints>0||t.DocumentTouch&&o instanceof DocumentTouch))return!0},aboutToggle:function(){var e=o.getElementById("aboutinfo");"none"===e.style.display?e.style.display="inline-block":e.style.display="none"},equalHeight:function(e){var t=0;e.each(function(){var e=$(this).height();e>t&&(t=e)}),e.height(t)},handleAlert:function(e){var t=$(e).closest(".alert-box"),o=t.data("alert-name");if(o)return $.ajax(cms_data.ajax_alerts_url,{method:"POST",data:{op:"delete",alert:o}}).fail(function(e,t,o){console.debug("problem deleting an alert: "+o)}).done(function(){t.slideUp(1e3),t.parent().children().length<=1&&(cms_dialog($("#alert-dialog"),"close"),$("#alert-noalerts").show(),$("#alerts").closest("li").remove()),t.remove()})},setupAlerts:function(){var e=this;$("#alerts").on("click activate",function(e){e.preventDefault(),cms_dialog($("#alert-dialog"))}),$(".alert-remove, .alert-msg a").on("click activate",function(t){t.preventDefault(),e.handleAlert(t.target)})}}}(this,jQuery,window,document),$(function(){LT.init()});