!function(){var t,e,$,n,i=[];n="undefined"!=typeof global?global:window,$=n.jQuery;var r=function(){return n.tinymce};$.fn.tinymce=function(c){var s,o,l,u=this,f="";if(!u.length)return u;if(!c)return r()?r().get(u[0].id):null;u.css("visibility","hidden");var p=function(){var t=[],n=0;e||(a(),e=!0),u.each(function(e,i){var a,s=i.id,o=c.oninit;s||(i.id=s=r().DOM.uniqueId()),r().get(s)||(a=r().createEditor(s,c),t.push(a),a.on("init",function(){var e,i=o;u.css("visibility",""),o&&++n==t.length&&("string"==typeof i&&(e=-1===i.indexOf(".")?null:r().resolve(i.replace(/\.\w+$/,"")),i=r().resolve(i)),i.apply(e||r(),t))}))}),$.each(t,function(t,e){e.render()})};if(n.tinymce||t||!(s=c.script_url))1===t?i.push(p):p();else{t=1,o=s.substring(0,s.lastIndexOf("/")),-1!=s.indexOf(".min")&&(f=".min"),n.tinymce=n.tinyMCEPreInit||{base:o,suffix:f},-1!=s.indexOf("gzip")&&(l=c.language||"en",s=s+(/\?/.test(s)?"&":"?")+"js=true&core=true&suffix="+escape(f)+"&themes="+escape(c.theme||"modern")+"&plugins="+escape(c.plugins||"")+"&languages="+(l||""),n.tinyMCE_GZ||(n.tinyMCE_GZ={start:function(){var t=function(t){r().ScriptLoader.markDone(r().baseURI.toAbsolute(t))};t("langs/"+l+".js"),t("themes/"+c.theme+"/theme"+f+".js"),t("themes/"+c.theme+"/langs/"+l+".js"),$.each(c.plugins.split(","),function(e,n){n&&(t("plugins/"+n+"/plugin"+f+".js"),t("plugins/"+n+"/langs/"+l+".js"))})},end:function(){}}));var d=document.createElement("script");d.type="text/javascript",d.onload=d.onreadystatechange=function(e){e=e||window.event,2===t||"load"!=e.type&&!/complete|loaded/.test(d.readyState)||(r().dom.Event.domLoaded=1,t=2,c.script_loaded&&c.script_loaded(),p(),$.each(i,function(t,e){e()}))},d.src=s,document.body.appendChild(d)}return u},$.extend($.expr[":"],{tinymce:function(t){var e;return!!(t.id&&"tinymce"in n&&(e=r().get(t.id))&&e.editorManager===r())}});var a=function(){var t=function(t){"remove"===t&&this.each(function(t,e){var n=i(e);n&&n.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(t,e){var n=r().get(e.id.replace(/_parent$/,""));n&&n.remove()})},e=function(e){var n;if(null!=e)t.call(this),this.each(function(t,n){var i;(i=r().get(n.id))&&i.setContent(e)});else if(this.length>0&&(n=r().get(this[0].id)))return n.getContent()},i=function(t){var e=null;return t&&t.id&&n.tinymce&&(e=r().get(t.id)),e},a=function(t){return!!(t&&t.length&&n.tinymce&&t.is(":tinymce"))},c={};$.each(["text","html","val"],function(t,n){var r=c[n]=$.fn[n],s="text"===n;$.fn[n]=function(t){if(!a(this))return r.apply(this,arguments);if(void 0!==t)return e.call(this.filter(":tinymce"),t),r.apply(this.not(":tinymce"),arguments),this;var n="",c=arguments;return(s?this:this.eq(0)).each(function(t,e){var a=i(e);n+=a?s?a.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):a.getContent({save:!0}):r.apply($(e),c)}),n}}),$.each(["append","prepend"],function(t,e){var n=c[e]=$.fn[e],r="prepend"===e;$.fn[e]=function(t){return a(this)?void 0!==t?("string"==typeof t&&this.filter(":tinymce").each(function(e,n){var a=i(n);a&&a.setContent(r?t+a.getContent():a.getContent()+t)}),n.apply(this.not(":tinymce"),arguments),this):void 0:n.apply(this,arguments)}}),$.each(["remove","replaceWith","replaceAll","empty"],function(e,n){var i=c[n]=$.fn[n];$.fn[n]=function(){return t.call(this,n),i.apply(this,arguments)}}),c.attr=$.fn.attr,$.fn.attr=function(t,n){var r=arguments;if(!t||"value"!==t||!a(this))return c.attr.apply(this,r);if(void 0!==n)return e.call(this.filter(":tinymce"),n),c.attr.apply(this.not(":tinymce"),r),this;var s=this[0],o=i(s);return o?o.getContent({save:!0}):c.attr.apply($(s),r)}}}();